<div mat-dialog-content>
  <mat-tab-group mat-align-tabs="start">

    <mat-tab label="Stats">

      <table *ngIf="accountStats" class="table" cellspacing="0" cellpadding="0">
        <tbody>
          <tr>
            <th>Total time:</th>
            <th>{{accountStats.totalTimeInSeconds | seceondsToHhmmss}}</th>
          </tr>
          <tr>
            <td class="border-top-0">Total time finished</td>
            <td class="border-top-0">{{accountStats.totalTimeInSecondsFinished | seceondsToHhmmss}}</td>
          </tr>
          <tr>
            <td>Total time not finished</td>
            <td>{{accountStats.totalTimeInSecondsNotFinished | seceondsToHhmmss}}</td>
          </tr>

          <tr>
            <th>Number of projects:</th>
            <th>{{accountStats.numberOfProjects}}</th>
          </tr>
          <tr>
            <td class="border-top-0">Number of finished projects</td>
            <td class="border-top-0">{{accountStats.numberOfFinishedProjects}}</td>
          </tr>
          <tr>
            <td>Number of not finished projects</td>
            <td>{{accountStats.numberOfNotFinishedProjects}}</td>
          </tr>

          <tr>
            <th>Number of stopwatches:</th>
            <th>{{accountStats.numberOfStopwatches}}</th>
          </tr>
          <tr>
            <td class="border-top-0">Number of finished stopwatches</td>
            <td class="border-top-0">{{accountStats.numberOfFinishedStopwatches}}</td>
          </tr>
          <tr>
            <td class="leftColumn">Number of not finished stopwatches</td>
            <td>{{accountStats.numberOfNotFinishedStopwatches}}</td>
          </tr>

          <tr>
            <th>Account date created:</th>
            <th>{{accountStats.accountDateCreated | date}}</th>
          </tr>
          <tr>
            <td class="border-top-0">Days ago:</td>
            <td class="border-top-0">{{accountStats.accountCreatedDaysAgo }}</td>
          </tr>

        </tbody>
      </table>

    </mat-tab>

    <mat-tab label="Settings">

      <div class="mt-3 mb-2" *ngIf="errors">
        <div *ngFor="let error of errors">
          <p class="text-danger text-break">{{error}}</p>
        </div>
      </div>

      <form (ngSubmit)="onSubmit(form.value)" [formGroup]="form">

        <mat-form-field appearance="legacy">
          <mat-label>Email</mat-label>
          <input formControlName="email" matInput />
          <mat-error *ngIf="form.invalid">The email field is required</mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="user?.hasPassword" appearance="legacy">
          <mat-label>Old password</mat-label>
          <input formControlName="oldPassword" matInput type="password" />
          <mat-error *ngIf="form.invalid">The Old password field is required</mat-error>
        </mat-form-field>

        <p *ngIf="!user?.hasPassword">Set password</p>
        <mat-form-field appearance="legacy">
          <mat-label>New password</mat-label>
          <input formControlName="newPassword" matInput type="password" />
          <mat-error *ngIf="form.invalid">{{getErrorMessageFieldPassword('newPassword')}}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="legacy">
          <mat-label>Confirm new password</mat-label>
          <input formControlName="confirmNewPassword" matInput type="password" />
          <mat-error *ngIf="form.invalid">{{getErrorMessageFieldPassword('confirmNewPassword')}}</mat-error>
        </mat-form-field>

        <button mat-flat-button class="d-block ml-auto" color="primary" [disabled]="form.invalid || !form.dirty" aria-label="save changes" type="submit">Save changes</button>
      </form>


      <button (click)="onOpenConfirmDeleteAccountDialog()" class="mt-4 d-block ml-auto" mat-raised-button color="warn">Delete account</button>
    </mat-tab>
  </mat-tab-group>

  <button mat-icon-button
          mat-dialog-close
          class="hide-dialog-button text-center mt-3"
          aria-label="hide">

    <i class="fas fa-times"></i>
  </button>
</div>
